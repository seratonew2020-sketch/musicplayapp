# üîß ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Retry Limit Exceeded

## ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

**Error**: `Retry Limit Exceeded: Firebase Storage ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ`

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**:
- Firebase Storage SDK ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ timeout ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å
- CORS errors ‡∏ó‡∏≥‡πÉ‡∏´‡πâ retry ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏à‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô limit
- Network latency ‡∏™‡∏π‡∏á

---

## ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### 1. ‡πÉ‡∏ä‡πâ API ‡πÅ‡∏ó‡∏ô Firebase Storage SDK

**‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å**: Firebase Storage SDK ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Retry Limit Exceeded)  
**‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô**: API Server (‡πÉ‡∏ä‡πâ Firebase Admin SDK - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ timeout)

### 2. ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

```
Frontend ‚Üí API Server ‚Üí Firebase Admin SDK ‚Üí Firebase Storage
```

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ**:
- ‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Retry Limit Exceeded
- ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å
- ‚úÖ Signed URLs ‡∏à‡∏≤‡∏Å server-side
- ‚úÖ Error handling ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤

---

## üîÑ ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á

### ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï:

1. **`src/composables/useAudioPlayer.js`**
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° health check ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API
   - ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á error handling
   - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠ API ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°

2. **`src/plugins/musicApi.js`**
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° timeout ‡πÄ‡∏õ‡πá‡∏ô 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å)
   - ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á error messages

3. **`src/App.vue`**
   - ‡πÉ‡∏ä‡πâ API ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å
   - ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Firebase Storage connection ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

---

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. Start API Server

```bash
npm run server
```

### 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Server ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

```bash
curl http://localhost:3000/api/health
```

### 3. ‡πÄ‡∏õ‡∏¥‡∏î Frontend

```bash
npm run dev
```

Frontend ‡∏à‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å API ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## üìã Flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### Before (‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤):
```
Frontend ‚Üí Firebase Storage SDK ‚Üí Firebase Storage
         ‚ùå Retry Limit Exceeded
```

### After (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß):
```
Frontend ‚Üí API Server ‚Üí Firebase Admin SDK ‚Üí Firebase Storage
         ‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ timeout
```

---

## ‚ö†Ô∏è ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### 1. API Server ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ server ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà
curl http://localhost:3000/api/health

# ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÉ‡∏´‡πâ start server
npm run server
```

### 2. Firebase Admin SDK ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ setup
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö service account key
- ‡∏î‡∏π‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ô `FIREBASE_ADMIN_SETUP.md`

### 3. Network Issues
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö firewall
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö CORS settings

---

## üîç Debug

### ‡∏î‡∏π Logs:

**Frontend Console:**
```
üéµ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏•‡∏î playlist ‡∏à‡∏≤‡∏Å API: http://localhost:3000
‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏û‡∏•‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏à‡∏≤‡∏Å API ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ Queue: X ‡πÑ‡∏ü‡∏•‡πå
```

**API Server:**
```
üìÇ Loading music from paths: [...]
‚úÖ Loaded X files from path
```

---

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ

- ‚úÖ ‡πÉ‡∏ä‡πâ API ‡πÅ‡∏ó‡∏ô Firebase Storage SDK
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° timeout ‡πÄ‡∏õ‡πá‡∏ô 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‚úÖ Health check ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API
- ‚úÖ Error handling ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤
- ‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Retry Limit Exceeded

**‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ app ‡∏à‡∏∞‡πÉ‡∏ä‡πâ API ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Retry Limit Exceeded ‡πÅ‡∏•‡πâ‡∏ß!** üéµ

